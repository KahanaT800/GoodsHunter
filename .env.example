# ==============================
# 1. 镜像与部署配置
# ==============================
REPO_OWNER= # 镜像仓库所属用户/组织

# ==============================
# 2. SSL / Certbot 配置
# ==============================
DOMAIN_NAME=goods-hunter.com # 绑定域名
CERT_EMAIL=example@gmail.com # Certbot 证书邮箱

# ==============================
# 3. MySQL 配置
# ==============================
MYSQL_ROOT_PASSWORD=example # MySQL root 密码
MYSQL_EXPORTER_PASSWORD=exporter_password_123 # MySQL 监控用户密码
DB_HOST=mysql # MySQL 主机
DB_PORT=3306 # MySQL 端口
DB_USER=root # MySQL 用户
DB_PASSWORD=example # MySQL 密码
DB_NAME=goodshunter # MySQL 数据库名
# DB_DSN=root:example@tcp(mysql:3306)/goodshunter?parseTime=true&loc=Local # 完整 DSN（优先于上面的拆分配置）

# ==============================
# 4. Redis 配置
# ==============================
REDIS_ADDR=redis:6379 # Redis 地址
REDIS_PASSWORD=example # Redis 密码

# ==============================
# 5. 应用配置
# ==============================
APP_ENV=production # 运行环境: local / prod
APP_LOG_LEVEL=info # 日志级别: debug / info / warn / error
APP_HTTP_ADDR=:8080 # API 服务监听地址
APP_CRAWLER_GRPC_ADDR=crawler:50051 # 爬虫 gRPC 地址
APP_SCHEDULE_INTERVAL=5m # 调度间隔
APP_NEW_ITEM_DURATION=1h # 新商品热度持续时间
APP_MAX_ITEMS_PER_TASK=300 # 每个任务保留的最大商品数
APP_WORKER_POOL_SIZE=50 # 调度器 Worker Pool 大小
APP_QUEUE_CAPACITY=1000 # 调度器队列容量
APP_GUEST_IDLE_TIMEOUT=10m # Guest 无操作超时
APP_GUEST_HEARTBEAT=5m # Guest 心跳间隔
APP_MAX_TASKS_PER_USER=3 # 每用户最大任务数

# Redis Streams 任务队列配置（可选，默认使用数据库轮询）
# 启用后可以实现秒级任务响应和分布式调度
APP_ENABLE_REDIS_QUEUE=true # 是否启用 Redis Streams 队列
APP_TASK_QUEUE_STREAM=goodshunter:task:queue # Redis Stream 名称
APP_TASK_QUEUE_GROUP=scheduler_group # Redis Consumer Group 名称

# ==============================
# 6. Crawler 配置
# ==============================
BROWSER_BIN_PATH=/usr/bin/chromium-browser # 浏览器可执行路径
CHROME_BIN=/usr/bin/chromium-browser # 兼容旧变量名
BROWSER_HEADLESS=true # 是否无头模式
BROWSER_MAX_CONCURRENCY=5 # 最大并发页面数
BROWSER_MAX_FETCH_COUNT=50 # 每次抓取最大数量

# ==============================
# 7. 安全配置
# ==============================
JWT_SECRET=example # JWT 签名密钥
INVITE_CODE=example # 邀请码（为空表示禁止注册）

# ==============================
# 8. 邮件通知
# ==============================
SMTP_HOST=smtp.gmail.com # SMTP 主机
SMTP_PORT=587 # SMTP 端口
SMTP_USER= # SMTP 用户
SMTP_PASS= # SMTP 密码
SMTP_FROM= # 发件人邮箱

# ==============================
# 9. Grafana Cloud 监控（Alloy）
# ==============================
GRAFANA_CLOUD_PROM_REMOTE_WRITE_URL= # Grafana Cloud Prometheus Remote Write URL
GRAFANA_CLOUD_PROM_USERNAME= # Grafana Cloud Prometheus 用户名
GRAFANA_CLOUD_PROM_API_KEY= # Grafana Cloud Prometheus API Key
GRAFANA_CLOUD_LOKI_URL= # Grafana Cloud Loki URL
GRAFANA_CLOUD_LOKI_USERNAME= # Grafana Cloud Loki 用户名
GRAFANA_CLOUD_LOKI_API_KEY= # Grafana Cloud Loki API Key
